<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>≈ûef Donanƒ±mƒ± Hesaplayƒ±cƒ±</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background:#f5f7fa; 
    color:#333; 
    margin:0; 
    padding:20px; 
    line-height: 1.6;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .language-selector {
    text-align: right;
    margin-bottom: 20px;
  }

  .lang-btn {
    padding: 8px 16px;
    border: 1px solid #ced4da;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    margin-left: 5px;
    transition: all 0.3s ease;
  }

  .lang-btn.active {
    background: #4CAF50;
    color: white;
    border-color: #4CAF50;
  }

  h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 30px;
    font-size: 2.5rem;
  }

  h2 {
    color: #34495e;
    margin: 25px 0 15px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid #e9ecef;
  }

  h3 {
    color: #495057;
    margin: 20px 0 15px 0;
  }

  /* Ekipman B√∂l√ºmleri */
  .equipment-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }

  .equipment-header {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #dee2e6;
  }

  .equipment-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 10px;
    margin-right: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 1.2rem;
  }

  .equipment-name {
    font-size: 1.4rem;
    font-weight: 600;
    color: #2c3e50;
  }

  .slots-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .slot-group {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border: 2px solid #e9ecef;
  }

  .slot-name {
    font-weight: 600;
    color: #495057;
    margin-bottom: 15px;
    text-align: center;
    font-size: 1.1rem;
  }

  .level-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
  }

  .level-group {
    background: white;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
  }

  .level-group h4 {
    margin-bottom: 10px;
    color: #495057;
    font-size: 0.9rem;
    text-align: center;
  }

  .level-select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    background: white;
    margin-bottom: 8px;
    font-size: 0.9rem;
  }

  /* Toplu Kontroller */
  .bulk-controls {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
    text-align: center;
  }

  .bulk-row {
    display: flex;
    gap: 15px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 15px;
  }

  .bulk-select {
    padding: 10px 15px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    background: white;
    min-width: 150px;
  }

  .action-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 20px;
  }

  /* Malzemeler B√∂l√ºm√º */
  .materials-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }

  .materials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 20px 0;
  }

  .material-input {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border: 2px solid #e9ecef;
  }

  .material-input label {
    display: block;
    margin-bottom: 10px;
    font-weight: 600;
    color: #495057;
    font-size: 1rem;
  }

  .material-input input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    font-size: 1rem;
  }

  /* Butonlar */
  .btn {
    padding: 12px 25px;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
  }

  .btn-secondary {
    background: linear-gradient(135deg, #6c757d, #5a6268);
    color: white;
  }

  .btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(108, 117, 125, 0.3);
  }

  .btn-danger {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
  }

  .btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
  }

  /* Sonu√ßlar B√∂l√ºm√º */
  .results-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }

  .excess {
    color: #28a745;
    font-weight: bold;
  }

  .missing {
    color: #dc3545;
    font-weight: bold;
  }

  /* Tablo */
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-size: 0.9rem;
  }

  th, td {
    border: 1px solid #e0e0e0;
    padding: 10px;
    text-align: center;
  }

  th {
    background-color: #f0f0f0;
    font-weight: 600;
    color: #495057;
    position: sticky;
    top: 0;
  }

  .level-row {
    background: #fafafa;
  }

  .level-row:hover {
    background: #f0f0f0;
  }

  .total-row {
    background: #e3f2fd;
    font-weight: bold;
    font-size: 1rem;
  }

  .total-row td {
    border-top: 2px solid #2196f3;
  }

  .star {
    color: #FFD700;
    font-weight: bold;
  }

  /* Responsive */
  @media screen and (max-width: 768px) {
    .bulk-row {
      flex-direction: column;
    }
    
    .bulk-select {
      width: 100%;
    }
    
    .slots-container {
      grid-template-columns: 1fr;
    }
    
    .level-controls {
      grid-template-columns: 1fr;
    }
    
    .materials-grid {
      grid-template-columns: 1fr;
    }
    
    .action-buttons {
      flex-direction: column;
    }
    
    .btn {
      width: 100%;
    }

    table {
      font-size: 0.8rem;
    }

    th, td {
      padding: 6px;
    }
  }
</style>
</head>
<body>

<div class="container">
  <!-- Dil Se√ßici -->
  <div class="language-selector">
    <button class="lang-btn active">T√ºrk√ße</button>
  </div>

  <h1 id="mainTitle">≈ûef Donanƒ±mƒ± Y√ºkseltme Hesaplayƒ±cƒ±</h1>
  
  <!-- Toplu Kontroller -->
  <div class="bulk-controls">
    <h2 id="bulkTitle">Toplu Seviye Ayarlarƒ±</h2>
    <div class="bulk-row">
      <select id="bulkCurrent" class="bulk-select">
        <option value="">Mevcut Seviye Se√ßin</option>
      </select>
      <select id="bulkTarget" class="bulk-select">
        <option value="">Hedef Seviye Se√ßin</option>
      </select>
      <button class="btn btn-primary" onclick="setBulkLevels()" id="setAllBtn">T√ºm√ºn√º Aynƒ± Yap</button>
    </div>
    <div class="bulk-row">
      <button class="btn btn-secondary" onclick="setBulkCurrentOnly()" id="setCurrentBtn">Sadece Mevcutlarƒ± Ayarla</button>
      <button class="btn btn-secondary" onclick="setBulkTargetOnly()" id="setTargetBtn">Sadece Hedefleri Ayarla</button>
    </div>
    <div class="action-buttons">
      <button class="btn btn-primary" onclick="calculateUpgrade()" id="calculateBtn">Hesapla</button>
      <button class="btn btn-secondary" onclick="resetMaterials()" id="resetMaterialsBtn">Malzemeleri Sƒ±fƒ±rla</button>
      <button class="btn btn-danger" onclick="resetAll()" id="resetAllBtn">T√ºm√ºn√º Sƒ±fƒ±rla</button>
    </div>
  </div>

  <!-- Ekipmanlar - Sadece 1 mevcut ve 1 hedef seviye -->
  <div class="equipment-section">
    <div class="equipment-header">
      <div class="equipment-icon">‚öîÔ∏è</div>
      <div class="equipment-name" id="mizrakciTitle">Mƒ±zrak√ßƒ±</div>
    </div>
    <div class="slots-container">
      <div class="slot-group">
        <div class="slot-name" id="sapkaTitle">≈ûapka</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle1">Mevcut Seviye</h4>
            <select class="level-select" id="mizrakci-sapka-current"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle1">Hedef Seviye</h4>
            <select class="level-select" id="mizrakci-sapka-target"></select>
          </div>
        </div>
      </div>
      <div class="slot-group">
        <div class="slot-name" id="saatTitle">Saat</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle2">Mevcut Seviye</h4>
            <select class="level-select" id="mizrakci-saat-current"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle2">Hedef Seviye</h4>
            <select class="level-select" id="mizrakci-saat-target"></select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="equipment-section">
    <div class="equipment-header">
      <div class="equipment-icon">üõ°Ô∏è</div>
      <div class="equipment-name" id="piyadeTitle">Piyade</div>
    </div>
    <div class="slots-container">
      <div class="slot-group">
        <div class="slot-name" id="paltoTitle">Palto</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle3">Mevcut Seviye</h4>
            <select class="level-select" id="piyade-palto-current"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle3">Hedef Seviye</h4>
            <select class="level-select" id="piyade-palto-target"></select>
          </div>
        </div>
      </div>
      <div class="slot-group">
        <div class="slot-name" id="pantolonTitle">Pantolon</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle4">Mevcut Seviye</h4>
            <select class="level-select" id="piyade-pantolon-current"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle4">Hedef Seviye</h4>
            <select class="level-select" id="piyade-pantolon-target"></select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="equipment-section">
    <div class="equipment-header">
      <div class="equipment-icon">üéØ</div>
      <div class="equipment-name" id="nisanciTitle">Ni≈üancƒ±</div>
    </div>
    <div class="slots-container">
      <div class="slot-group">
        <div class="slot-name" id="yuzukTitle">Y√ºz√ºk</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle5">Mevcut Seviye</h4>
            <select class="level-select" id="nisanci-yuzuk-current"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle5">Hedef Seviye</h4>
            <select class="level-select" id="nisanci-yuzuk-target"></select>
          </div>
        </div>
      </div>
      <div class="slot-group">
        <div class="slot-name" id="sopaTitle">Sopa</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle6">Mevcut Seviye</h4>
            <select class="level-select" id="nisanci-sopa-current"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle6">Hedef Seviye</h4>
            <select class="level-select" id="nisanci-sopa-target"></select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Malzemeler -->
  <div class="materials-section">
    <h2 id="materialsTitle">Mevcut Malzemeler</h2>
    <div class="materials-grid">
      <div class="material-input">
        <label for="material1" id="material1Label">Sert Ala≈üƒ±m:</label>
        <input type="number" id="material1" value="0" min="0">
      </div>
      <div class="material-input">
        <label for="material2" id="material2Label">Cila √á√∂zeltisi:</label>
        <input type="number" id="material2" value="0" min="0">
      </div>
      <div class="material-input">
        <label for="material3" id="material3Label">Tasarƒ±m Planlarƒ±:</label>
        <input type="number" id="material3" value="0" min="0">
      </div>
      <div class="material-input">
        <label for="material4" id="material4Label">Amber:</label>
        <input type="number" id="material4" value="0" min="0">
      </div>
    </div>
  </div>

  <!-- Sonu√ßlar -->
  <div class="results-section" id="resultsSection" style="display: none;">
    <h2 id="resultsTitle">Y√ºkseltme Sonu√ßlarƒ±</h2>
    
    <table>
      <thead>
        <tr>
          <th id="levelHeader">Seviye</th>
          <th id="equipmentHeader">Ekipman - Slot</th>
          <th id="material1Header">Sert Ala≈üƒ±m</th>
          <th id="material2Header">Cila √á√∂zeltisi</th>
          <th id="material3Header">Tasarƒ±m Planlarƒ±</th>
          <th id="material4Header">Amber</th>
        </tr>
      </thead>
      <tbody id="resultsTableBody">
      </tbody>
      <tfoot id="resultsTableFooter">
      </tfoot>
    </table>
  </div>
</div>

<script>
// Dil √ßevirileri
const translations = {
  TR: {
    mainTitle: "≈ûef Donanƒ±mƒ± Y√ºkseltme Hesaplayƒ±cƒ±",
    bulkTitle: "Toplu Seviye Ayarlarƒ±",
    selectCurrent: "Mevcut Seviye Se√ßin",
    selectTarget: "Hedef Seviye Se√ßin",
    setAllBtn: "T√ºm√ºn√º Aynƒ± Yap",
    setCurrentBtn: "Sadece Mevcutlarƒ± Ayarla",
    setTargetBtn: "Sadece Hedefleri Ayarla",
    calculateBtn: "Hesapla",
    resetMaterialsBtn: "Malzemeleri Sƒ±fƒ±rla",
    resetAllBtn: "T√ºm√ºn√º Sƒ±fƒ±rla",
    mizrakciTitle: "Mƒ±zrak√ßƒ±",
    sapkaTitle: "≈ûapka",
    saatTitle: "Saat",
    piyadeTitle: "Piyade",
    paltoTitle: "Palto",
    pantolonTitle: "Pantolon",
    nisanciTitle: "Ni≈üancƒ±",
    yuzukTitle: "Y√ºz√ºk",
    sopaTitle: "Sopa",
    currentLevelsTitle: "Mevcut Seviye",
    targetLevelsTitle: "Hedef Seviye",
    materialsTitle: "Mevcut Malzemeler",
    material1Label: "Sert Ala≈üƒ±m:",
    material2Label: "Cila √á√∂zeltisi:",
    material3Label: "Tasarƒ±m Planlarƒ±:",
    material4Label: "Amber:",
    resultsTitle: "Y√ºkseltme Sonu√ßlarƒ±",
    levelHeader: "Seviye",
    equipmentHeader: "Ekipman - Slot",
    material1Header: "Sert Ala≈üƒ±m",
    material2Header: "Cila √á√∂zeltisi",
    material3Header: "Tasarƒ±m Planlarƒ±",
    material4Header: "Amber",
    totalText: "TOPLAM",
    selectOption: "-- Se√ßiniz --"
  }
};

let currentLanguage = 'TR';

// Metinleri g√ºncelle
function updateLanguage() {
  const t = translations[currentLanguage];
  
  // Ba≈ülƒ±klar
  document.getElementById('mainTitle').textContent = t.mainTitle;
  document.getElementById('bulkTitle').textContent = t.bulkTitle;
  document.getElementById('materialsTitle').textContent = t.materialsTitle;
  document.getElementById('resultsTitle').textContent = t.resultsTitle;
  
  // Dropdown placeholder'larƒ±
  document.getElementById('bulkCurrent').querySelector('option').textContent = t.selectCurrent;
  document.getElementById('bulkTarget').querySelector('option').textContent = t.selectTarget;
  
  // Butonlar
  document.getElementById('setAllBtn').textContent = t.setAllBtn;
  document.getElementById('setCurrentBtn').textContent = t.setCurrentBtn;
  document.getElementById('setTargetBtn').textContent = t.setTargetBtn;
  document.getElementById('calculateBtn').textContent = t.calculateBtn;
  document.getElementById('resetMaterialsBtn').textContent = t.resetMaterialsBtn;
  document.getElementById('resetAllBtn').textContent = t.resetAllBtn;
  
  // Ekipman isimleri
  document.getElementById('mizrakciTitle').textContent = t.mizrakciTitle;
  document.getElementById('sapkaTitle').textContent = t.sapkaTitle;
  document.getElementById('saatTitle').textContent = t.saatTitle;
  document.getElementById('piyadeTitle').textContent = t.piyadeTitle;
  document.getElementById('paltoTitle').textContent = t.paltoTitle;
  document.getElementById('pantolonTitle').textContent = t.pantolonTitle;
  document.getElementById('nisanciTitle').textContent = t.nisanciTitle;
  document.getElementById('yuzukTitle').textContent = t.yuzukTitle;
  document.getElementById('sopaTitle').textContent = t.sopaTitle;
  
  // Level ba≈ülƒ±klarƒ±
  for (let i = 1; i <= 6; i++) {
    document.getElementById(`currentLevelsTitle${i}`).textContent = t.currentLevelsTitle;
    document.getElementById(`targetLevelsTitle${i}`).textContent = t.targetLevelsTitle;
  }
  
  // Malzeme etiketleri
  document.getElementById('material1Label').textContent = t.material1Label;
  document.getElementById('material2Label').textContent = t.material2Label;
  document.getElementById('material3Label').textContent = t.material3Label;
  document.getElementById('material4Label').textContent = t.material4Label;
  
  // Tablo ba≈ülƒ±klarƒ±
  document.getElementById('levelHeader').textContent = t.levelHeader;
  document.getElementById('equipmentHeader').textContent = t.equipmentHeader;
  document.getElementById('material1Header').textContent = t.material1Header;
  document.getElementById('material2Header').textContent = t.material2Header;
  document.getElementById('material3Header').textContent = t.material3Header;
  document.getElementById('material4Header').textContent = t.material4Header;
  
  // Dropdown'larƒ± yeniden olu≈ütur
  initializeSelects();
}

// Ekipman verileri
const equipmentData = [
  { 
    id: 'mizrakci', 
    name: { TR: 'Mƒ±zrak√ßƒ±' }, 
    slots: [
      { id: 'sapka', name: { TR: '≈ûapka' } },
      { id: 'saat', name: { TR: 'Saat' } }
    ] 
  },
  { 
    id: 'piyade', 
    name: { TR: 'Piyade' }, 
    slots: [
      { id: 'palto', name: { TR: 'Palto' } },
      { id: 'pantolon', name: { TR: 'Pantolon' } }
    ] 
  },
  { 
    id: 'nisanci', 
    name: { TR: 'Ni≈üancƒ±' }, 
    slots: [
      { id: 'yuzuk', name: { TR: 'Y√ºz√ºk' } },
      { id: 'sopa', name: { TR: 'Sopa' } }
    ] 
  }
];

// Y√ºkseltme maliyet verileri (≈ûef Donanƒ±mƒ± verileri)
const upgradeCosts = {
  "ye≈üil": { material1: 1500, material2: 15, material3: 0, material4: 0 },
  "ye≈üil-1": { material1: 3800, material2: 40, material3: 0, material4: 0 },
  "mavi": { material1: 7000, material2: 70, material3: 0, material4: 0 },
  "mavi-1": { material1: 9700, material2: 95, material3: 0, material4: 0 },
  "mavi-2": { material1: 0, material2: 0, material3: 45, material4: 0 },
  "mavi-3": { material1: 0, material2: 0, material3: 50, material4: 0 },
  "mor": { material1: 0, material2: 0, material3: 60, material4: 0 },
  "mor-1": { material1: 0, material2: 0, material3: 70, material4: 0 },
  "mor-2": { material1: 6500, material2: 65, material3: 40, material4: 0 },
  "mor-3": { material1: 8000, material2: 80, material3: 50, material4: 0 },
  "mor-T1": { material1: 10000, material2: 95, material3: 60, material4: 0 },
  "mor-T1-1": { material1: 11000, material2: 110, material3: 70, material4: 0 },
  "mor-T1-2": { material1: 13000, material2: 130, material3: 85, material4: 0 },
  "mor-T1-3": { material1: 15000, material2: 160, material3: 100, material4: 0 },
  "altƒ±n": { material1: 22000, material2: 220, material3: 40, material4: 0 },
  "altƒ±n-1": { material1: 23000, material2: 230, material3: 40, material4: 0 },
  "altƒ±n-2": { material1: 25000, material2: 250, material3: 45, material4: 0 },
  "altƒ±n-3": { material1: 26000, material2: 260, material3: 45, material4: 0 },
  "altƒ±n-T1": { material1: 28000, material2: 280, material3: 45, material4: 0 },
  "altƒ±n-T1-1": { material1: 30000, material2: 300, material3: 55, material4: 0 },
  "altƒ±n-T1-2": { material1: 32000, material2: 320, material3: 55, material4: 0 },
  "altƒ±n-T1-3": { material1: 38000, material2: 340, material3: 55, material4: 0 },
  "altƒ±n-T2": { material1: 38000, material2: 360, material3: 55, material4: 0 },
  "altƒ±n-T2-1": { material1: 43000, material2: 430, material3: 75, material4: 0 },
  "altƒ±n-T2-2": { material1: 45000, material2: 460, material3: 80, material4: 0 },
  "altƒ±n-T2-3": { material1: 48000, material2: 500, material3: 85, material4: 0 },
  "kƒ±rmƒ±zƒ±": { material1: 50000, material2: 530, material3: 85, material4: 10 },
  "kƒ±rmƒ±zƒ±-1": { material1: 52000, material2: 560, material3: 90, material4: 10 },
  "kƒ±rmƒ±zƒ±-2": { material1: 54000, material2: 590, material3: 95, material4: 10 },
  "kƒ±rmƒ±zƒ±-3": { material1: 56000, material2: 620, material3: 100, material4: 10 },
  "kƒ±rmƒ±zƒ±-T1": { material1: 59000, material2: 670, material3: 110, material4: 15 },
  "kƒ±rmƒ±zƒ±-T1-1": { material1: 61000, material2: 700, material3: 115, material4: 15 },
  "kƒ±rmƒ±zƒ±-T1-2": { material1: 63000, material2: 730, material3: 120, material4: 15 },
  "kƒ±rmƒ±zƒ±-T1-3": { material1: 65000, material2: 760, material3: 125, material4: 15 },
  "kƒ±rmƒ±zƒ±-T2": { material1: 68000, material2: 810, material3: 135, material4: 20 },
  "kƒ±rmƒ±zƒ±-T2-1": { material1: 70000, material2: 840, material3: 140, material4: 20 },
  "kƒ±rmƒ±zƒ±-T2-2": { material1: 72000, material2: 870, material3: 145, material4: 20 },
  "kƒ±rmƒ±zƒ±-T2-3": { material1: 74000, material2: 900, material3: 150, material4: 20 },
  "kƒ±rmƒ±zƒ±-T3": { material1: 77000, material2: 950, material3: 160, material4: 25 },
  "kƒ±rmƒ±zƒ±-T3-1": { material1: 80000, material2: 990, material3: 165, material4: 25 },
  "kƒ±rmƒ±zƒ±-T3-2": { material1: 83000, material2: 1030, material3: 170, material4: 25 },
  "kƒ±rmƒ±zƒ±-T3-3": { material1: 86000, material2: 1070, material3: 180, material4: 25 },
  "kƒ±rmƒ±zƒ±-T4": { material1: 120000, material2: 1500, material3: 250, material4: 40 },
  "kƒ±rmƒ±zƒ±-T4-1": { material1: 140000, material2: 1650, material3: 275, material4: 40 },
  "kƒ±rmƒ±zƒ±-T4-2": { material1: 160000, material2: 1800, material3: 300, material4: 40 },
  "kƒ±rmƒ±zƒ±-T4-3": { material1: 180000, material2: 1950, material3: 325, material4: 40 }
};

const levelKeys = Object.keys(upgradeCosts);

// Renk √ßevirileri
const colorTranslation = { 
  TR: {"ye≈üil":"Ye≈üil","mavi":"Mavi","mor":"Mor","altƒ±n":"Altƒ±n","kƒ±rmƒ±zƒ±":"Kƒ±rmƒ±zƒ±"}
};

// Yƒ±ldƒ±z simgeleriyle seviye isimlerini formatla
function formatLevelName(levelKey) {
  const parts = levelKey.split('-');
  let color = parts[0];
  let rest = parts.slice(1).join('-');
  let colorText = colorTranslation[currentLanguage][color] || color;
  
  // Yƒ±ldƒ±z simgeleriyle formatla
  if (rest === '1') return `${colorText} ‚òÖ`;
  if (rest === '2') return `${colorText} ‚òÖ‚òÖ`;
  if (rest === '3') return `${colorText} ‚òÖ‚òÖ‚òÖ`;
  if (rest === 'T1') return `${colorText} T1`;
  if (rest === 'T1-1') return `${colorText} T1 ‚òÖ`;
  if (rest === 'T1-2') return `${colorText} T1 ‚òÖ‚òÖ`;
  if (rest === 'T1-3') return `${colorText} T1 ‚òÖ‚òÖ‚òÖ`;
  if (rest === 'T2') return `${colorText} T2`;
  if (rest === 'T2-1') return `${colorText} T2 ‚òÖ`;
  if (rest === 'T2-2') return `${colorText} T2 ‚òÖ‚òÖ`;
  if (rest === 'T2-3') return `${colorText} T2 ‚òÖ‚òÖ‚òÖ`;
  if (rest === 'T3') return `${colorText} T3`;
  if (rest === 'T3-1') return `${colorText} T3 ‚òÖ`;
  if (rest === 'T3-2') return `${colorText} T3 ‚òÖ‚òÖ`;
  if (rest === 'T3-3') return `${colorText} T3 ‚òÖ‚òÖ‚òÖ`;
  if (rest === 'T4') return `${colorText} T4`;
  if (rest === 'T4-1') return `${colorText} T4 ‚òÖ`;
  if (rest === 'T4-2') return `${colorText} T4 ‚òÖ‚òÖ`;
  if (rest === 'T4-3') return `${colorText} T4 ‚òÖ‚òÖ‚òÖ`;
  
  return colorText + (rest ? '-' + rest : '');
}

// Seviye option'larƒ±nƒ± olu≈ütur (bo≈ü se√ßenekle)
function generateLevelOptions() {
  const t = translations[currentLanguage];
  let options = `<option value="">${t.selectOption}</option>`;
  levelKeys.forEach(key => {
    options += `<option value="${key}">${formatLevelName(key)}</option>`;
  });
  return options;
}

// Dropdown'larƒ± doldur
function initializeSelects() {
  // T√ºm seviye dropdown'larƒ±nƒ± doldur (bo≈ü ba≈ülangƒ±√ß)
  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current`);
      const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target`);
      
      if (currentSelect) {
        const currentValue = currentSelect.value;
        currentSelect.innerHTML = generateLevelOptions();
        if (currentValue) currentSelect.value = currentValue;
      }
      if (targetSelect) {
        const targetValue = targetSelect.value;
        targetSelect.innerHTML = generateLevelOptions();
        if (targetValue) targetSelect.value = targetValue;
      }
    });
  });

  // Toplu se√ßim dropdown'larƒ±nƒ± doldur
  const bulkCurrent = document.getElementById('bulkCurrent');
  const bulkTarget = document.getElementById('bulkTarget');
  
  const t = translations[currentLanguage];
  const currentVal = bulkCurrent.value;
  const targetVal = bulkTarget.value;
  
  bulkCurrent.innerHTML = `<option value="">${t.selectCurrent}</option>`;
  bulkTarget.innerHTML = `<option value="">${t.selectTarget}</option>`;
  
  levelKeys.forEach(key => {
    bulkCurrent.innerHTML += `<option value="${key}">${formatLevelName(key)}</option>`;
    bulkTarget.innerHTML += `<option value="${key}">${formatLevelName(key)}</option>`;
  });
  
  // Deƒüerleri koru
  if (currentVal) bulkCurrent.value = currentVal;
  if (targetVal) bulkTarget.value = targetVal;
}

// Toplu seviye ayarlama (hem mevcut hem hedef)
function setBulkLevels() {
  const currentVal = document.getElementById('bulkCurrent').value;
  const targetVal = document.getElementById('bulkTarget').value;
  
  // Eƒüer bir deƒüer bo≈üsa, sadece dolu olanƒ± uygula
  if (!currentVal && !targetVal) {
    return;
  }

  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current`);
      const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target`);
      
      if (currentVal && currentSelect) currentSelect.value = currentVal;
      if (targetVal && targetSelect) targetSelect.value = targetVal;
    });
  });
}

// Sadece mevcut seviyeleri ayarla
function setBulkCurrentOnly() {
  const currentVal = document.getElementById('bulkCurrent').value;
  
  if (!currentVal) {
    return;
  }

  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current`);
      if (currentSelect) currentSelect.value = currentVal;
    });
  });
}

// Sadece hedef seviyeleri ayarla
function setBulkTargetOnly() {
  const targetVal = document.getElementById('bulkTarget').value;
  
  if (!targetVal) {
    return;
  }

  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target`);
      if (targetSelect) targetSelect.value = targetVal;
    });
  });
}

// Malzemeleri sƒ±fƒ±rla
function resetMaterials() {
  document.getElementById('material1').value = 0;
  document.getElementById('material2').value = 0;
  document.getElementById('material3').value = 0;
  document.getElementById('material4').value = 0;
}

// T√ºm√ºn√º sƒ±fƒ±rla
function resetAll() {
  resetMaterials();
  initializeSelects();
  document.getElementById('resultsSection').style.display = 'none';
}

// Binlik ayracƒ± ekle
function formatNumber(num) {
  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

// Hesaplama fonksiyonu
function calculateUpgrade() {
  const materials = {
    material1: parseInt(document.getElementById('material1').value) || 0,
    material2: parseInt(document.getElementById('material2').value) || 0,
    material3: parseInt(document.getElementById('material3').value) || 0,
    material4: parseInt(document.getElementById('material4').value) || 0
  };

  let totalMaterials = { material1: 0, material2: 0, material3: 0, material4: 0 };
  const allUpgrades = [];

  const tableBody = document.getElementById('resultsTableBody');
  tableBody.innerHTML = '';

  // T√ºm ekipmanlarƒ± ve slotlarƒ± kontrol et
  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current`);
      const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target`);
      
      const currentLevel = currentSelect.value;
      const targetLevel = targetSelect.value;
      
      if (currentLevel && targetLevel) {
        const currentIndex = levelKeys.indexOf(currentLevel);
        const targetIndex = levelKeys.indexOf(targetLevel);
        
        if (currentIndex < targetIndex) {
          // Her seviye i√ßin ayrƒ± satƒ±r olu≈ütur
          for (let i = currentIndex; i < targetIndex; i++) {
            const levelKey = levelKeys[i + 1];
            const cost = upgradeCosts[levelKey];
            if (cost) {
              // Toplam malzemelere ekle
              totalMaterials.material1 += cost.material1;
              totalMaterials.material2 += cost.material2;
              totalMaterials.material3 += cost.material3;
              totalMaterials.material4 += cost.material4;

              // Upgrade'i kaydet
              allUpgrades.push({
                equipment: `${equip.name[currentLanguage]} - ${slot.name[currentLanguage]}`,
                level: formatLevelName(levelKey),
                costs: cost
              });
            }
          }
        }
      }
    });
  });

  // Eƒüer hi√ß y√ºkseltme yoksa sonu√ßlarƒ± g√∂sterme
  if (allUpgrades.length === 0) {
    document.getElementById('resultsSection').style.display = 'none';
    return;
  }

  // Tabloyu doldur
  allUpgrades.forEach(upgrade => {
    const row = document.createElement('tr');
    row.className = 'level-row';
    row.innerHTML = `
      <td><strong>${upgrade.level}</strong></td>
      <td>${upgrade.equipment}</td>
      <td>${formatNumber(upgrade.costs.material1)}</td>
      <td>${formatNumber(upgrade.costs.material2)}</td>
      <td>${formatNumber(upgrade.costs.material3)}</td>
      <td>${formatNumber(upgrade.costs.material4)}</td>
    `;
    tableBody.appendChild(row);
  });

  // Toplam satƒ±rƒ±nƒ± olu≈ütur
  const footer = document.getElementById('resultsTableFooter');
  footer.innerHTML = '';

  const totalRow = document.createElement('tr');
  totalRow.className = 'total-row';
  
  // Malzeme durumlarƒ±nƒ± hesapla
  const materialStatus = {};
  Object.keys(totalMaterials).forEach(mat => {
    const difference = materials[mat] - totalMaterials[mat];
    let displayText = '';
    
    if (difference > 0) {
      displayText = `<span class="excess">+${formatNumber(difference)}</span>`;
    } else if (difference < 0) {
      displayText = `<span class="missing">-${formatNumber(Math.abs(difference))}</span>`;
    } else {
      displayText = '0';
    }
    
    materialStatus[mat] = {
      total: totalMaterials[mat],
      difference: difference,
      display: displayText
    };
  });

  const t = translations[currentLanguage];
  totalRow.innerHTML = `
    <td colspan="2"><strong>${t.totalText}</strong></td>
    <td>
      ${formatNumber(totalMaterials.material1)}<br>
      <small>${materialStatus.material1.display}</small>
    </td>
    <td>
      ${formatNumber(totalMaterials.material2)}<br>
      <small>${materialStatus.material2.display}</small>
    </td>
    <td>
      ${formatNumber(totalMaterials.material3)}<br>
      <small>${materialStatus.material3.display}</small>
    </td>
    <td>
      ${formatNumber(totalMaterials.material4)}<br>
      <small>${materialStatus.material4.display}</small>
    </td>
  `;
  footer.appendChild(totalRow);

  // Sonu√ßlarƒ± g√∂ster
  document.getElementById('resultsSection').style.display = 'block';
}

// Sayfa y√ºklendiƒüinde ba≈ülat
document.addEventListener('DOMContentLoaded', function() {
  initializeSelects();
});
</script>

</body>
</html>