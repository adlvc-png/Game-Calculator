<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fırın Yükseltme Hesaplayıcı</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #1a1a1a;
            color: #e0e0e0;
            min-height: 100vh;
        }

        .calculator-container {
            max-width: 100%;
            padding: 15px;
        }

        .calculator-header {
            background: #2d2d2d;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #e74c3c;
        }

        .calculator-header h1 {
            font-size: 1.4em;
            color: #ffffff;
            font-weight: 600;
        }

        .input-section {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .input-field {
            flex: 1;
            min-width: 150px;
        }

        .input-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #b0b0b0;
            font-size: 0.9em;
        }

        .input-field input {
            width: 100%;
            padding: 10px 12px;
            background: #1a1a1a;
            border: 1px solid #404040;
            border-radius: 4px;
            color: #ffffff;
            font-size: 0.95em;
        }

        .input-field input:focus {
            outline: none;
            border-color: #e74c3c;
        }

        .calculate-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .calculate-btn:hover {
            background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
        }

        .table-container {
            display: none;
            background: #2d2d2d;
            border-radius: 8px;
            overflow: hidden;
        }

        .furnace-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
        }

        .furnace-table th {
            background: #3d3d3d;
            color: #ffffff;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9em;
            border-bottom: 1px solid #404040;
        }

        .furnace-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #404040;
            color: #e0e0e0;
        }

        .furnace-table tr:nth-child(even) {
            background: #252525;
        }

        .furnace-table tr:hover {
            background: #353535;
        }

        .furnace-table tr.total-row {
            background: #27ae60;
            color: white;
            font-weight: 600;
        }

        .furnace-table tr.total-row td {
            border-bottom: none;
            color: white;
        }

        .level-badge {
            background: #e74c3c;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.8em;
        }

        .prerequisites {
            max-width: 180px;
            line-height: 1.3;
            font-size: 0.85em;
        }

        .resource-cost {
            font-weight: 600;
            font-size: 0.85em;
        }

        .resource-wood { color: #8B4513; }
        .resource-meat { color: #e74c3c; }
        .resource-coal { color: #7f8c8d; }
        .resource-iron { color: #95a5a6; }

        .time-cell {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #f39c12;
            font-size: 0.85em;
        }

        .power-cell {
            font-weight: 600;
            color: #9b59b6;
            font-size: 0.85em;
        }

        /* Yan menü uyumluluk için responsive stiller */
        @media (max-width: 768px) {
            .calculator-container {
                padding: 10px;
            }
            
            .input-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .input-field {
                min-width: 100%;
            }
            
            .furnace-table {
                font-size: 0.8em;
            }
            
            .furnace-table th,
            .furnace-table td {
                padding: 8px 6px;
            }
        }

        /* Yan menü için compact stil */
        .compact-mode .calculator-container {
            padding: 10px;
        }

        .compact-mode .calculator-header {
            padding: 12px 15px;
            margin-bottom: 10px;
        }

        .compact-mode .calculator-header h1 {
            font-size: 1.2em;
        }

        .compact-mode .input-section {
            padding: 15px;
            margin-bottom: 10px;
        }

        .compact-mode .furnace-table {
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="calculator-header">
            <h1>Fırın Yükseltme Hesaplayıcı</h1>
        </div>

        <div class="input-section">
            <div class="input-group">
                <div class="input-field">
                    <label for="mevcutSeviye">Mevcut Seviye</label>
                    <input type="number" id="mevcutSeviye" min="1" max="29" value="1">
                </div>
                <div class="input-field">
                    <label for="hedefSeviye">Hedef Seviye</label>
                    <input type="number" id="hedefSeviye" min="2" max="30" value="30">
                </div>
            </div>
            
            <button class="calculate-btn" onclick="hesaplaVeGoster()">HESAPLA</button>
        </div>

        <div class="table-container" id="tableContainer">
            <table class="furnace-table">
                <thead>
                    <tr>
                        <th>Seviye</th>
                        <th>Ön Koşul Binalar</th>
                        <th>Kaynak Maliyeti</th>
                        <th>İnşa Süresi</th>
                        <th>Bina Gücü</th>
                    </tr>
                </thead>
                <tbody id="furnaceTableBody">
                    <!-- Tablo verileri JavaScript ile doldurulacak -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Fırın verileri - DÜZELTİLMİŞ GÜÇ DEĞERLERİ
        const furnaceData = {
            1: { 
                prerequisites: "-",
                wood: 0, coal: 0, iron: 0, meat: 0, 
                time: 0, power: 2000 
            },
            2: { 
                prerequisites: "Odun Fabrikası Lv. 1",
                wood: 180, coal: 0, iron: 0, meat: 0, 
                time: 6, power: 3800 
            },
            3: { 
                prerequisites: "Barınak Lv. 2",
                wood: 805, coal: 0, iron: 0, meat: 0, 
                time: 60, power: 6500 
            },
            4: { 
                prerequisites: "Kömür Madeni Lv. 3",
                wood: 1800, coal: 360, iron: 0, meat: 0, 
                time: 180, power: 10100 
            },
            5: { 
                prerequisites: "Kahraman Salonu Lv. 3<br>Barınak Lv. 3",
                wood: 7600, coal: 1500, iron: 0, meat: 0, 
                time: 600, power: 15500 
            },
            6: { 
                prerequisites: "Demir Madeni Lv. 5",
                wood: 19000, coal: 3800, iron: 960, meat: 0, 
                time: 1800, power: 23600 
            },
            7: { 
                prerequisites: "Avcı Kulübesi Lv. 6",
                wood: 69000, coal: 13000, iron: 3400, meat: 0, 
                time: 3600, power: 35300 
            },
            8: { 
                prerequisites: "Piyade Kampı Lv. 7",
                wood: 120000, coal: 25000, iron: 6300, meat: 0, 
                time: 9000, power: 47000 
            },
            9: { 
                prerequisites: "Elçilik Lv. 8<br>Revir Lv. 1",
                wood: 260000, coal: 52000, iron: 13000, meat: 0, 
                time: 16200, power: 58700 
            },
            10: { 
                prerequisites: "Nişancı Kampı Lv. 9<br>Araş. Merkezi Lv. 9",
                wood: 460000, coal: 92000, iron: 23000, meat: 0, 
                time: 21600, power: 75700 
            },
            11: { 
                prerequisites: "Elçilik Lv. 10<br>Mızrakçı Kampı Lv. 10",
                wood: 1300000, coal: 260000, iron: 65000, meat: 1300000, 
                time: 27000, power: 92700 
            },
            12: { 
                prerequisites: "Elçilik Lv. 11<br>Komuta Merkezi Lv. 1",
                wood: 1600000, coal: 330000, iron: 84000, meat: 1600000, 
                time: 32400, power: 109700 
            },
            13: { 
                prerequisites: "Elçilik Lv. 12<br>Piyade Kampı Lv. 12",
                wood: 2300000, coal: 470000, iron: 110000, meat: 2300000, 
                time: 39600, power: 138400 
            },
            14: { 
                prerequisites: "Elçilik Lv. 13<br>Nişancı Kampı Lv. 13",
                wood: 3100000, coal: 630000, iron: 150000, meat: 3100000, 
                time: 50400, power: 167100 
            },
            15: { 
                prerequisites: "Elçilik Lv. 14<br>Mızrakçı Kampı Lv. 14",
                wood: 4600000, coal: 930000, iron: 230000, meat: 4600000, 
                time: 64800, power: 195800 
            },
            16: { 
                prerequisites: "Elçilik Lv. 15<br>Araş. Merkezi Lv. 15",
                wood: 5900000, coal: 1100000, iron: 290000, meat: 5900000, 
                time: 116880, power: 236200 
            },
            17: { 
                prerequisites: "Elçilik Lv. 16<br>Piyade Kampı Lv. 16",
                wood: 9300000, coal: 1800000, iron: 480000, meat: 9300000, 
                time: 131640, power: 276600 
            },
            18: { 
                prerequisites: "Elçilik Lv. 17<br>Nişancı Kampı Lv. 17",
                wood: 12000000, coal: 2500000, iron: 620000, meat: 12000000, 
                time: 172380, power: 317000 
            },
            19: { 
                prerequisites: "Elçilik Lv. 18<br>Mızrakçı Kampı Lv. 18",
                wood: 15000000, coal: 3100000, iron: 780000, meat: 15000000, 
                time: 215400, power: 374400 
            },
            20: { 
                prerequisites: "Elçilik Lv. 19<br>Araş. Merkezi Lv. 19",
                wood: 21000000, coal: 4300000, iron: 1000000, meat: 21000000, 
                time: 296280, power: 431800 
            },
            21: { 
                prerequisites: "Elçilik Lv. 20<br>Piyade Kampı Lv. 20",
                wood: 27000000, coal: 5400000, iron: 1300000, meat: 27000000, 
                time: 383940, power: 489200 
            },
            22: { 
                prerequisites: "Elçilik Lv. 21<br>Nişancı Kampı Lv. 21",
                wood: 36000000, coal: 7200000, iron: 1800000, meat: 36000000, 
                time: 577740, power: 575300 
            },
            23: { 
                prerequisites: "Elçilik Lv. 22<br>Mızrakçı Kampı Lv. 22",
                wood: 44000000, coal: 8900000, iron: 2200000, meat: 44000000, 
                time: 808800, power: 661400 
            },
            24: { 
                prerequisites: "Elçilik Lv. 23<br>Araş. Merkezi Lv. 23",
                wood: 60000000, coal: 12000000, iron: 3000000, meat: 60000000, 
                time: 1133580, power: 747500 
            },
            25: { 
                prerequisites: "Elçilik Lv. 24<br>Piyade Kampı Lv. 24",
                wood: 81000000, coal: 16000000, iron: 4000000, meat: 81000000, 
                time: 1590120, power: 833600 
            },
            26: { 
                prerequisites: "Elçilik Lv. 25<br>Nişancı Kampı Lv. 25",
                wood: 100000000, coal: 21000000, iron: 5200000, meat: 100000000, 
                time: 1823160, power: 960100 
            },
            27: { 
                prerequisites: "Elçilik Lv. 26<br>Mızrakçı Kampı Lv. 26",
                wood: 140000000, coal: 24000000, iron: 7400000, meat: 140000000, 
                time: 2180580, power: 1086600 
            },
            28: { 
                prerequisites: "Elçilik Lv. 27<br>Araş. Merkezi Lv. 27",
                wood: 190000000, coal: 39000000, iron: 9900000, meat: 190000000, 
                time: 2518320, power: 1213100 
            },
            29: { 
                prerequisites: "Elçilik Lv. 28<br>Piyade Kampı Lv. 28",
                wood: 240000000, coal: 49000000, iron: 12000000, meat: 240000000, 
                time: 2893320, power: 1339600 
            },
            30: { 
                prerequisites: "Elçilik Lv. 29<br>Nişancı Kampı Lv. 29",
                wood: 300000000, coal: 60000000, iron: 15000000, meat: 300000000, 
                time: 3472020, power: 1523500 
            }
        };

        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + 'B';
            } else if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        function formatTime(seconds) {
            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            if (days > 0) {
                return `${days}g ${hours}sa`;
            } else if (hours > 0) {
                return `${hours}sa ${minutes}dk`;
            } else {
                return `${minutes}dk`;
            }
        }

        function formatTimeDetailed(seconds) {
            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            if (days > 0) {
                return `${days} Gün ${hours}sa ${minutes}dk`;
            } else if (hours > 0) {
                return `${hours}sa ${minutes}dk ${secs}sn`;
            } else if (minutes > 0) {
                return `${minutes}dk ${secs}sn`;
            } else {
                return `${secs}sn`;
            }
        }

        // Hesaplama ve tablo gösterme fonksiyonu
        function hesaplaVeGoster() {
            const mevcut = parseInt(document.getElementById('mevcutSeviye').value);
            const hedef = parseInt(document.getElementById('hedefSeviye').value);
            
            if (isNaN(mevcut) || isNaN(hedef) || mevcut >= hedef) {
                alert('Lütfen geçerli seviye aralığı girin (Mevcut < Hedef)');
                return;
            }

            // Tabloyu göster
            document.getElementById('tableContainer').style.display = 'block';

            const tableBody = document.getElementById('furnaceTableBody');
            tableBody.innerHTML = '';

            let toplamOdun = 0;
            let toplamKomur = 0;
            let toplamDemir = 0;
            let toplamEt = 0;
            let toplamSure = 0;
            let toplamGuc = 0;

            // 1. seviyeyi tabloya ekle (mevcut seviye)
            const mevcutData = furnaceData[mevcut];
            const mevcutRow = document.createElement('tr');
            mevcutRow.innerHTML = `
                <td><span class="level-badge">${mevcut}</span></td>
                <td class="prerequisites">-</td>
                <td>-</td>
                <td class="time-cell">-</td>
                <td class="power-cell">${formatNumber(mevcutData.power)}</td>
            `;
            tableBody.appendChild(mevcutRow);
            toplamGuc += mevcutData.power;

            // Seçilen seviyeler arasındaki verileri tabloya ekle
            for (let level = mevcut + 1; level <= hedef; level++) {
                const data = furnaceData[level];
                const row = document.createElement('tr');
                
                // Kaynak maliyeti string'ini oluştur - YENİ SIRALAMA: Odun, Et, Kömür, Demir
                let costString = '';
                if (data.wood > 0) costString += `<span class="resource-cost resource-wood">Odun ${formatNumber(data.wood)}</span><br>`;
                if (data.meat > 0) costString += `<span class="resource-cost resource-meat">Et ${formatNumber(data.meat)}</span><br>`;
                if (data.coal > 0) costString += `<span class="resource-cost resource-coal">Kömür ${formatNumber(data.coal)}</span><br>`;
                if (data.iron > 0) costString += `<span class="resource-cost resource-iron">Demir ${formatNumber(data.iron)}</span>`;
                
                if (costString === '') costString = '-';

                row.innerHTML = `
                    <td><span class="level-badge">${level}</span></td>
                    <td class="prerequisites">${data.prerequisites}</td>
                    <td>${costString}</td>
                    <td class="time-cell">${formatTime(data.time)}</td>
                    <td class="power-cell">${formatNumber(data.power)}</td>
                `;
                
                tableBody.appendChild(row);

                // Toplamları hesapla
                toplamOdun += data.wood;
                toplamKomur += data.coal;
                toplamDemir += data.iron;
                toplamEt += data.meat;
                toplamSure += data.time;
                toplamGuc += data.power;
            }

            // Toplam satırını ekle
            const totalRow = document.createElement('tr');
            totalRow.className = 'total-row';
            totalRow.innerHTML = `
                <td><strong>TOPLAM</strong></td>
                <td><strong>${mevcut} → ${hedef}</strong></td>
                <td>
                    <strong>
                        <span style="color: white">Odun ${formatNumber(toplamOdun)}</span><br>
                        <span style="color: white">Et ${formatNumber(toplamEt)}</span><br>
                        <span style="color: white">Kömür ${formatNumber(toplamKomur)}</span><br>
                        <span style="color: white">Demir ${formatNumber(toplamDemir)}</span>
                    </strong>
                </td>
                <td><strong style="color: white">${formatTimeDetailed(toplamSure)}</strong></td>
                <td><strong style="color: white">${formatNumber(toplamGuc)}</strong></td>
            `;
            
            tableBody.appendChild(totalRow);
        }

        // Yan menü için compact mode fonksiyonu
        function setCompactMode(isCompact) {
            if (isCompact) {
                document.body.classList.add('compact-mode');
            } else {
                document.body.classList.remove('compact-mode');
            }
        }
    </script>
</body>
</html>