<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Åef TÄ±lsÄ±mÄ± HesaplayÄ±cÄ±</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background:#f5f7fa; 
    color:#333; 
    margin:0; 
    padding:20px; 
    line-height: 1.6;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
  }

  .language-selector {
    text-align: right;
    margin-bottom: 20px;
  }

  .lang-btn {
    padding: 8px 16px;
    border: 1px solid #ced4da;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    margin-left: 5px;
    transition: all 0.3s ease;
  }

  .lang-btn.active {
    background: #4CAF50;
    color: white;
    border-color: #4CAF50;
  }

  h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 30px;
    font-size: 2.5rem;
  }

  h2 {
    color: #34495e;
    margin: 25px 0 15px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid #e9ecef;
  }

  h3 {
    color: #495057;
    margin: 20px 0 15px 0;
  }

  /* Ekipman BÃ¶lÃ¼mleri */
  .equipment-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }

  .equipment-header {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #dee2e6;
  }

  .equipment-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 10px;
    margin-right: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 1.2rem;
  }

  .equipment-name {
    font-size: 1.4rem;
    font-weight: 600;
    color: #2c3e50;
  }

  .slots-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .slot-group {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border: 2px solid #e9ecef;
  }

  .slot-name {
    font-weight: 600;
    color: #495057;
    margin-bottom: 15px;
    text-align: center;
    font-size: 1.1rem;
  }

  .level-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
  }

  .level-group {
    background: white;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
  }

  .level-group h4 {
    margin-bottom: 10px;
    color: #495057;
    font-size: 0.9rem;
    text-align: center;
  }

  .level-select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    background: white;
    margin-bottom: 8px;
    font-size: 0.9rem;
  }

  /* Toplu Kontroller */
  .bulk-controls {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
    text-align: center;
  }

  .bulk-row {
    display: flex;
    gap: 15px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 15px;
  }

  .bulk-select {
    padding: 10px 15px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    background: white;
    min-width: 150px;
  }

  .action-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 20px;
  }

  /* Malzemeler BÃ¶lÃ¼mÃ¼ */
  .materials-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }

  .materials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 20px 0;
  }

  .material-input {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border: 2px solid #e9ecef;
  }

  .material-input label {
    display: block;
    margin-bottom: 10px;
    font-weight: 600;
    color: #495057;
    font-size: 1rem;
  }

  .material-input input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    font-size: 1rem;
  }

  /* Butonlar */
  .btn {
    padding: 12px 25px;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
  }

  .btn-secondary {
    background: linear-gradient(135deg, #6c757d, #5a6268);
    color: white;
  }

  .btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(108, 117, 125, 0.3);
  }

  .btn-danger {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
  }

  .btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
  }

  /* SonuÃ§lar BÃ¶lÃ¼mÃ¼ */
  .results-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }

  .excess {
    color: #28a745;
    font-weight: bold;
  }

  .missing {
    color: #dc3545;
    font-weight: bold;
  }

  /* Tablo */
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-size: 0.9rem;
  }

  th, td {
    border: 1px solid #e0e0e0;
    padding: 10px;
    text-align: center;
  }

  th {
    background-color: #f0f0f0;
    font-weight: 600;
    color: #495057;
    position: sticky;
    top: 0;
  }

  .level-row {
    background: #fafafa;
  }

  .level-row:hover {
    background: #f0f0f0;
  }

  .total-row {
    background: #e3f2fd;
    font-weight: bold;
    font-size: 1rem;
  }

  .total-row td {
    border-top: 2px solid #2196f3;
  }

  /* Responsive */
  @media screen and (max-width: 768px) {
    .bulk-row {
      flex-direction: column;
    }
    
    .bulk-select {
      width: 100%;
    }
    
    .slots-container {
      grid-template-columns: 1fr;
    }
    
    .level-controls {
      grid-template-columns: 1fr;
    }
    
    .materials-grid {
      grid-template-columns: 1fr;
    }
    
    .action-buttons {
      flex-direction: column;
    }
    
    .btn {
      width: 100%;
    }

    table {
      font-size: 0.8rem;
    }

    th, td {
      padding: 6px;
    }
  }
</style>
</head>
<body>

<div class="container">
  <!-- Dil SeÃ§ici -->
  <div class="language-selector">
    <button class="lang-btn active">TÃ¼rkÃ§e</button>
  </div>

  <h1 id="mainTitle">Åef TÄ±lsÄ±mÄ± YÃ¼kseltme HesaplayÄ±cÄ±</h1>
  
  <!-- Toplu Kontroller -->
  <div class="bulk-controls">
    <h2 id="bulkTitle">Toplu Seviye AyarlarÄ±</h2>
    <div class="bulk-row">
      <select id="bulkCurrent" class="bulk-select">
        <option value="">Mevcut Seviye SeÃ§in</option>
      </select>
      <select id="bulkTarget" class="bulk-select">
        <option value="">Hedef Seviye SeÃ§in</option>
      </select>
      <button class="btn btn-primary" onclick="setBulkLevels()" id="setAllBtn">TÃ¼mÃ¼nÃ¼ AynÄ± Yap</button>
    </div>
    <div class="bulk-row">
      <button class="btn btn-secondary" onclick="setBulkCurrentOnly()" id="setCurrentBtn">Sadece MevcutlarÄ± Ayarla</button>
      <button class="btn btn-secondary" onclick="setBulkTargetOnly()" id="setTargetBtn">Sadece Hedefleri Ayarla</button>
    </div>
    <div class="action-buttons">
      <button class="btn btn-primary" onclick="calculateUpgrade()" id="calculateBtn">Hesapla</button>
      <button class="btn btn-secondary" onclick="resetMaterials()" id="resetMaterialsBtn">Malzemeleri SÄ±fÄ±rla</button>
      <button class="btn btn-danger" onclick="resetAll()" id="resetAllBtn">TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla</button>
    </div>
  </div>

  <!-- Ekipmanlar -->
  <div class="equipment-section">
    <div class="equipment-header">
      <div class="equipment-icon">âš”ï¸</div>
      <div class="equipment-name" id="mizrakciTitle">MÄ±zrakÃ§Ä±</div>
    </div>
    <div class="slots-container">
      <div class="slot-group">
        <div class="slot-name" id="sapkaTitle">Åapka</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle1">Mevcut Seviyeler</h4>
            <select class="level-select" id="mizrakci-sapka-current1"></select>
            <select class="level-select" id="mizrakci-sapka-current2"></select>
            <select class="level-select" id="mizrakci-sapka-current3"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle1">Hedef Seviyeler</h4>
            <select class="level-select" id="mizrakci-sapka-target1"></select>
            <select class="level-select" id="mizrakci-sapka-target2"></select>
            <select class="level-select" id="mizrakci-sapka-target3"></select>
          </div>
        </div>
      </div>
      <div class="slot-group">
        <div class="slot-name" id="saatTitle">Saat</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle2">Mevcut Seviyeler</h4>
            <select class="level-select" id="mizrakci-saat-current1"></select>
            <select class="level-select" id="mizrakci-saat-current2"></select>
            <select class="level-select" id="mizrakci-saat-current3"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle2">Hedef Seviyeler</h4>
            <select class="level-select" id="mizrakci-saat-target1"></select>
            <select class="level-select" id="mizrakci-saat-target2"></select>
            <select class="level-select" id="mizrakci-saat-target3"></select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="equipment-section">
    <div class="equipment-header">
      <div class="equipment-icon">ğŸ›¡ï¸</div>
      <div class="equipment-name" id="piyadeTitle">Piyade</div>
    </div>
    <div class="slots-container">
      <div class="slot-group">
        <div class="slot-name" id="paltoTitle">Palto</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle3">Mevcut Seviyeler</h4>
            <select class="level-select" id="piyade-palto-current1"></select>
            <select class="level-select" id="piyade-palto-current2"></select>
            <select class="level-select" id="piyade-palto-current3"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle3">Hedef Seviyeler</h4>
            <select class="level-select" id="piyade-palto-target1"></select>
            <select class="level-select" id="piyade-palto-target2"></select>
            <select class="level-select" id="piyade-palto-target3"></select>
          </div>
        </div>
      </div>
      <div class="slot-group">
        <div class="slot-name" id="pantolonTitle">Pantolon</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle4">Mevcut Seviyeler</h4>
            <select class="level-select" id="piyade-pantolon-current1"></select>
            <select class="level-select" id="piyade-pantolon-current2"></select>
            <select class="level-select" id="piyade-pantolon-current3"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle4">Hedef Seviyeler</h4>
            <select class="level-select" id="piyade-pantolon-target1"></select>
            <select class="level-select" id="piyade-pantolon-target2"></select>
            <select class="level-select" id="piyade-pantolon-target3"></select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="equipment-section">
    <div class="equipment-header">
      <div class="equipment-icon">ğŸ¯</div>
      <div class="equipment-name" id="nisanciTitle">NiÅŸancÄ±</div>
    </div>
    <div class="slots-container">
      <div class="slot-group">
        <div class="slot-name" id="yuzukTitle">YÃ¼zÃ¼k</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle5">Mevcut Seviyeler</h4>
            <select class="level-select" id="nisanci-yuzuk-current1"></select>
            <select class="level-select" id="nisanci-yuzuk-current2"></select>
            <select class="level-select" id="nisanci-yuzuk-current3"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle5">Hedef Seviyeler</h4>
            <select class="level-select" id="nisanci-yuzuk-target1"></select>
            <select class="level-select" id="nisanci-yuzuk-target2"></select>
            <select class="level-select" id="nisanci-yuzuk-target3"></select>
          </div>
        </div>
      </div>
      <div class="slot-group">
        <div class="slot-name" id="sopaTitle">Sopa</div>
        <div class="level-controls">
          <div class="level-group">
            <h4 id="currentLevelsTitle6">Mevcut Seviyeler</h4>
            <select class="level-select" id="nisanci-sopa-current1"></select>
            <select class="level-select" id="nisanci-sopa-current2"></select>
            <select class="level-select" id="nisanci-sopa-current3"></select>
          </div>
          <div class="level-group">
            <h4 id="targetLevelsTitle6">Hedef Seviyeler</h4>
            <select class="level-select" id="nisanci-sopa-target1"></select>
            <select class="level-select" id="nisanci-sopa-target2"></select>
            <select class="level-select" id="nisanci-sopa-target3"></select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Malzemeler -->
  <div class="materials-section">
    <h2 id="materialsTitle">Mevcut Malzemeler</h2>
    <div class="materials-grid">
      <div class="material-input">
        <label for="material1" id="material1Label">TÄ±lsÄ±m Klavuzu:</label>
        <input type="number" id="material1" value="0" min="0">
      </div>
      <div class="material-input">
        <label for="material2" id="material2Label">TÄ±lsÄ±m TasarÄ±mÄ±:</label>
        <input type="number" id="material2" value="0" min="0">
      </div>
      <div class="material-input">
        <label for="material3" id="material3Label">TÄ±lsÄ±m SÄ±rlarÄ±:</label>
        <input type="number" id="material3" value="0" min="0">
      </div>
    </div>
  </div>

  <!-- SonuÃ§lar -->
  <div class="results-section" id="resultsSection" style="display: none;">
    <h2 id="resultsTitle">YÃ¼kseltme SonuÃ§larÄ±</h2>
    
    <table>
      <thead>
        <tr>
          <th id="levelHeader">Seviye</th>
          <th id="equipmentHeader">Ekipman - Slot</th>
          <th id="material1Header">TÄ±lsÄ±m Klavuzu</th>
          <th id="material2Header">TÄ±lsÄ±m TasarÄ±mÄ±</th>
          <th id="material3Header">TÄ±lsÄ±m SÄ±rlarÄ±</th>
        </tr>
      </thead>
      <tbody id="resultsTableBody">
      </tbody>
      <tfoot id="resultsTableFooter">
      </tfoot>
    </table>
  </div>
</div>

<script>
// Dil Ã§evirileri
const translations = {
  TR: {
    mainTitle: "Åef TÄ±lsÄ±mÄ± YÃ¼kseltme HesaplayÄ±cÄ±",
    bulkTitle: "Toplu Seviye AyarlarÄ±",
    selectCurrent: "Mevcut Seviye SeÃ§in",
    selectTarget: "Hedef Seviye SeÃ§in",
    setAllBtn: "TÃ¼mÃ¼nÃ¼ AynÄ± Yap",
    setCurrentBtn: "Sadece MevcutlarÄ± Ayarla",
    setTargetBtn: "Sadece Hedefleri Ayarla",
    calculateBtn: "Hesapla",
    resetMaterialsBtn: "Malzemeleri SÄ±fÄ±rla",
    resetAllBtn: "TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla",
    mizrakciTitle: "MÄ±zrakÃ§Ä±",
    sapkaTitle: "Åapka",
    saatTitle: "Saat",
    piyadeTitle: "Piyade",
    paltoTitle: "Palto",
    pantolonTitle: "Pantolon",
    nisanciTitle: "NiÅŸancÄ±",
    yuzukTitle: "YÃ¼zÃ¼k",
    sopaTitle: "Sopa",
    currentLevelsTitle: "Mevcut Seviyeler",
    targetLevelsTitle: "Hedef Seviyeler",
    materialsTitle: "Mevcut Malzemeler",
    material1Label: "TÄ±lsÄ±m Klavuzu:",
    material2Label: "TÄ±lsÄ±m TasarÄ±mÄ±:",
    material3Label: "TÄ±lsÄ±m SÄ±rlarÄ±:",
    resultsTitle: "YÃ¼kseltme SonuÃ§larÄ±",
    levelHeader: "Seviye",
    equipmentHeader: "Ekipman - Slot",
    material1Header: "TÄ±lsÄ±m Klavuzu",
    material2Header: "TÄ±lsÄ±m TasarÄ±mÄ±",
    material3Header: "TÄ±lsÄ±m SÄ±rlarÄ±",
    totalText: "TOPLAM",
    selectOption: "-- SeÃ§iniz --",
    levelText: "Seviye"
  }
};

let currentLanguage = 'TR';

// Metinleri gÃ¼ncelle
function updateLanguage() {
  const t = translations[currentLanguage];
  
  // BaÅŸlÄ±klar
  document.getElementById('mainTitle').textContent = t.mainTitle;
  document.getElementById('bulkTitle').textContent = t.bulkTitle;
  document.getElementById('materialsTitle').textContent = t.materialsTitle;
  document.getElementById('resultsTitle').textContent = t.resultsTitle;
  
  // Dropdown placeholder'larÄ±
  document.getElementById('bulkCurrent').querySelector('option').textContent = t.selectCurrent;
  document.getElementById('bulkTarget').querySelector('option').textContent = t.selectTarget;
  
  // Butonlar
  document.getElementById('setAllBtn').textContent = t.setAllBtn;
  document.getElementById('setCurrentBtn').textContent = t.setCurrentBtn;
  document.getElementById('setTargetBtn').textContent = t.setTargetBtn;
  document.getElementById('calculateBtn').textContent = t.calculateBtn;
  document.getElementById('resetMaterialsBtn').textContent = t.resetMaterialsBtn;
  document.getElementById('resetAllBtn').textContent = t.resetAllBtn;
  
  // Ekipman isimleri
  document.getElementById('mizrakciTitle').textContent = t.mizrakciTitle;
  document.getElementById('sapkaTitle').textContent = t.sapkaTitle;
  document.getElementById('saatTitle').textContent = t.saatTitle;
  document.getElementById('piyadeTitle').textContent = t.piyadeTitle;
  document.getElementById('paltoTitle').textContent = t.paltoTitle;
  document.getElementById('pantolonTitle').textContent = t.pantolonTitle;
  document.getElementById('nisanciTitle').textContent = t.nisanciTitle;
  document.getElementById('yuzukTitle').textContent = t.yuzukTitle;
  document.getElementById('sopaTitle').textContent = t.sopaTitle;
  
  // Level baÅŸlÄ±klarÄ±
  for (let i = 1; i <= 6; i++) {
    document.getElementById(`currentLevelsTitle${i}`).textContent = t.currentLevelsTitle;
    document.getElementById(`targetLevelsTitle${i}`).textContent = t.targetLevelsTitle;
  }
  
  // Malzeme etiketleri
  document.getElementById('material1Label').textContent = t.material1Label;
  document.getElementById('material2Label').textContent = t.material2Label;
  document.getElementById('material3Label').textContent = t.material3Label;
  
  // Tablo baÅŸlÄ±klarÄ±
  document.getElementById('levelHeader').textContent = t.levelHeader;
  document.getElementById('equipmentHeader').textContent = t.equipmentHeader;
  document.getElementById('material1Header').textContent = t.material1Header;
  document.getElementById('material2Header').textContent = t.material2Header;
  document.getElementById('material3Header').textContent = t.material3Header;
  
  // Dropdown'larÄ± yeniden oluÅŸtur
  initializeSelects();
}

// Ekipman verileri
const equipmentData = [
  { 
    id: 'mizrakci', 
    name: { TR: 'MÄ±zrakÃ§Ä±' }, 
    slots: [
      { id: 'sapka', name: { TR: 'Åapka' } },
      { id: 'saat', name: { TR: 'Saat' } }
    ] 
  },
  { 
    id: 'piyade', 
    name: { TR: 'Piyade' }, 
    slots: [
      { id: 'palto', name: { TR: 'Palto' } },
      { id: 'pantolon', name: { TR: 'Pantolon' } }
    ] 
  },
  { 
    id: 'nisanci', 
    name: { TR: 'NiÅŸancÄ±' }, 
    slots: [
      { id: 'yuzuk', name: { TR: 'YÃ¼zÃ¼k' } },
      { id: 'sopa', name: { TR: 'Sopa' } }
    ] 
  }
];

// YÃ¼kseltme maliyet verileri
const upgradeCosts = {
  1: { material1: 5, material2: 5, material3: 0 },
  2: { material1: 40, material2: 15, material3: 0 },
  3: { material1: 60, material2: 40, material3: 0 },
  4: { material1: 80, material2: 100, material3: 0 },
  5: { material1: 100, material2: 200, material3: 0 },
  6: { material1: 120, material2: 300, material3: 0 },
  7: { material1: 140, material2: 400, material3: 0 },
  8: { material1: 200, material2: 400, material3: 0 },
  9: { material1: 300, material2: 400, material3: 0 },
  10: { material1: 420, material2: 420, material3: 0 },
  11: { material1: 560, material2: 420, material3: 0 },
  12: { material1: 580, material2: 450, material3: 15 },
  13: { material1: 580, material2: 450, material3: 30 },
  14: { material1: 600, material2: 500, material3: 45 },
  15: { material1: 600, material2: 500, material3: 70 },
  16: { material1: 650, material2: 550, material3: 100 }
};

// Seviye option'larÄ±nÄ± oluÅŸtur (boÅŸ seÃ§enekle)
function generateLevelOptions() {
  const t = translations[currentLanguage];
  let options = `<option value="">${t.selectOption}</option>`;
  for (let level = 1; level <= 16; level++) {
    options += `<option value="${level}">${t.levelText} ${level}</option>`;
  }
  return options;
}

// Dropdown'larÄ± doldur
function initializeSelects() {
  // TÃ¼m seviye dropdown'larÄ±nÄ± doldur (boÅŸ baÅŸlangÄ±Ã§)
  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      for (let i = 1; i <= 3; i++) {
        const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current${i}`);
        const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target${i}`);
        
        if (currentSelect) {
          const currentValue = currentSelect.value;
          currentSelect.innerHTML = generateLevelOptions();
          if (currentValue) currentSelect.value = currentValue;
        }
        if (targetSelect) {
          const targetValue = targetSelect.value;
          targetSelect.innerHTML = generateLevelOptions();
          if (targetValue) targetSelect.value = targetValue;
        }
      }
    });
  });

  // Toplu seÃ§im dropdown'larÄ±nÄ± doldur
  const bulkCurrent = document.getElementById('bulkCurrent');
  const bulkTarget = document.getElementById('bulkTarget');
  
  const t = translations[currentLanguage];
  const currentVal = bulkCurrent.value;
  const targetVal = bulkTarget.value;
  
  bulkCurrent.innerHTML = `<option value="">${t.selectCurrent}</option>`;
  bulkTarget.innerHTML = `<option value="">${t.selectTarget}</option>`;
  
  for (let level = 1; level <= 16; level++) {
    bulkCurrent.innerHTML += `<option value="${level}">${t.levelText} ${level}</option>`;
    bulkTarget.innerHTML += `<option value="${level}">${t.levelText} ${level}</option>`;
  }
  
  // DeÄŸerleri koru
  if (currentVal) bulkCurrent.value = currentVal;
  if (targetVal) bulkTarget.value = targetVal;
}

// Toplu seviye ayarlama (hem mevcut hem hedef)
function setBulkLevels() {
  const currentVal = document.getElementById('bulkCurrent').value;
  const targetVal = document.getElementById('bulkTarget').value;
  
  // EÄŸer bir deÄŸer boÅŸsa, sadece dolu olanÄ± uygula
  if (!currentVal && !targetVal) {
    return;
  }

  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      for (let i = 1; i <= 3; i++) {
        const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current${i}`);
        const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target${i}`);
        
        if (currentVal && currentSelect) currentSelect.value = currentVal;
        if (targetVal && targetSelect) targetSelect.value = targetVal;
      }
    });
  });
}

// Sadece mevcut seviyeleri ayarla
function setBulkCurrentOnly() {
  const currentVal = document.getElementById('bulkCurrent').value;
  
  if (!currentVal) {
    return;
  }

  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      for (let i = 1; i <= 3; i++) {
        const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current${i}`);
        if (currentSelect) currentSelect.value = currentVal;
      }
    });
  });
}

// Sadece hedef seviyeleri ayarla
function setBulkTargetOnly() {
  const targetVal = document.getElementById('bulkTarget').value;
  
  if (!targetVal) {
    return;
  }

  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      for (let i = 1; i <= 3; i++) {
        const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target${i}`);
        if (targetSelect) targetSelect.value = targetVal;
      }
    });
  });
}

// Malzemeleri sÄ±fÄ±rla
function resetMaterials() {
  document.getElementById('material1').value = 0;
  document.getElementById('material2').value = 0;
  document.getElementById('material3').value = 0;
}

// TÃ¼mÃ¼nÃ¼ sÄ±fÄ±rla
function resetAll() {
  resetMaterials();
  initializeSelects();
  document.getElementById('resultsSection').style.display = 'none';
}

// Binlik ayracÄ± ekle
function formatNumber(num) {
  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

// Hesaplama fonksiyonu
function calculateUpgrade() {
  const materials = {
    material1: parseInt(document.getElementById('material1').value) || 0,
    material2: parseInt(document.getElementById('material2').value) || 0,
    material3: parseInt(document.getElementById('material3').value) || 0
  };

  let totalMaterials = { material1: 0, material2: 0, material3: 0 };
  const allUpgrades = [];

  const tableBody = document.getElementById('resultsTableBody');
  tableBody.innerHTML = '';

  // TÃ¼m ekipmanlarÄ± ve slotlarÄ± kontrol et
  equipmentData.forEach(equip => {
    equip.slots.forEach(slot => {
      for (let slotNum = 1; slotNum <= 3; slotNum++) {
        const currentSelect = document.getElementById(`${equip.id}-${slot.id}-current${slotNum}`);
        const targetSelect = document.getElementById(`${equip.id}-${slot.id}-target${slotNum}`);
        
        const currentLevel = currentSelect.value ? parseInt(currentSelect.value) : 0;
        const targetLevel = targetSelect.value ? parseInt(targetSelect.value) : 0;
        
        if (currentLevel < targetLevel) {
          // Her seviye iÃ§in ayrÄ± satÄ±r oluÅŸtur (1'den baÅŸlayarak)
          for (let level = currentLevel + 1; level <= targetLevel; level++) {
            const cost = upgradeCosts[level];
            if (cost) {
              // Toplam malzemelere ekle
              totalMaterials.material1 += cost.material1;
              totalMaterials.material2 += cost.material2;
              totalMaterials.material3 += cost.material3;

              // Upgrade'i kaydet
              allUpgrades.push({
                equipment: `${equip.name[currentLanguage]} - ${slot.name[currentLanguage]}`,
                slot: `Slot ${slotNum}`,
                level: level,
                costs: cost
              });
            }
          }
        }
      }
    });
  });

  // EÄŸer hiÃ§ yÃ¼kseltme yoksa sonuÃ§larÄ± gÃ¶sterme
  if (allUpgrades.length === 0) {
    document.getElementById('resultsSection').style.display = 'none';
    return;
  }

  // Tabloyu doldur (seviye sÄ±rasÄ±na gÃ¶re)
  allUpgrades.sort((a, b) => a.level - b.level);
  
  allUpgrades.forEach(upgrade => {
    const row = document.createElement('tr');
    row.className = 'level-row';
    row.innerHTML = `
      <td><strong>${upgrade.level}</strong></td>
      <td>${upgrade.equipment} - ${upgrade.slot}</td>
      <td>${formatNumber(upgrade.costs.material1)}</td>
      <td>${formatNumber(upgrade.costs.material2)}</td>
      <td>${formatNumber(upgrade.costs.material3)}</td>
    `;
    tableBody.appendChild(row);
  });

  // Toplam satÄ±rÄ±nÄ± oluÅŸtur
  const footer = document.getElementById('resultsTableFooter');
  footer.innerHTML = '';

  const totalRow = document.createElement('tr');
  totalRow.className = 'total-row';
  
  // Malzeme durumlarÄ±nÄ± hesapla
  const materialStatus = {};
  Object.keys(totalMaterials).forEach(mat => {
    const difference = materials[mat] - totalMaterials[mat];
    let displayText = '';
    
    if (difference > 0) {
      displayText = `<span class="excess">+${formatNumber(difference)}</span>`;
    } else if (difference < 0) {
      displayText = `<span class="missing">-${formatNumber(Math.abs(difference))}</span>`;
    } else {
      displayText = '0';
    }
    
    materialStatus[mat] = {
      total: totalMaterials[mat],
      difference: difference,
      display: displayText
    };
  });

  const t = translations[currentLanguage];
  totalRow.innerHTML = `
    <td colspan="2"><strong>${t.totalText}</strong></td>
    <td>
      ${formatNumber(totalMaterials.material1)}<br>
      <small>${materialStatus.material1.display}</small>
    </td>
    <td>
      ${formatNumber(totalMaterials.material2)}<br>
      <small>${materialStatus.material2.display}</small>
    </td>
    <td>
      ${formatNumber(totalMaterials.material3)}<br>
      <small>${materialStatus.material3.display}</small>
    </td>
  `;
  footer.appendChild(totalRow);

  // SonuÃ§larÄ± gÃ¶ster
  document.getElementById('resultsSection').style.display = 'block';
}

// Sayfa yÃ¼klendiÄŸinde baÅŸlat
document.addEventListener('DOMContentLoaded', function() {
  initializeSelects();
});
</script>

</body>
</html>